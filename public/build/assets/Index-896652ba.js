import{o as n,c as g,w as l,b as a,f as r,a as e,d,e as u,g as v,F as b,h as y,p as _,v as k,q as $,t as m}from"./app-6368ce4f.js";import{_ as M}from"./AppLayout-2ea5157a.js";import{p as C}from"./Pagination-25bd34b5.js";import{_ as w}from"./Checkbox-5efd4287.js";import{_ as h}from"./SecondaryButton-0f744ae6.js";import{_ as I}from"./Modal-ae5f0b75.js";import{_ as D,a as c}from"./TextInput-e3edec0e.js";import{_ as p}from"./InputLabel-19a6c087.js";import{_ as F}from"./PrimaryButton-66494774.js";import{_ as V}from"./ConfirmationModal-367dcb4a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DangerButton-0cc73a6b.js";const B=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Feedback List",-1),P={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},N={class:"table"},T=e("th",null,"Title",-1),x=e("th",null,"Category",-1),U=e("th",null,"Votes",-1),q=e("th",null,"Submitted by",-1),L={key:0},O=e("th",null,"Action",-1),A={key:0},E=["onClick"],z=["href"],G=e("button",{class:"pl-2"},"Show",-1),H=[G],J=e("div",{class:"flex items-center justify-start my-4"},[e("strong",{class:"ml-5"},"Feedback Form")],-1),K={class:"form-group"},Q={class:"form-group"},R={class:"form-group"},W=e("option",{value:"bug"},"Bug",-1),X=e("option",{value:"feature"},"Feature",-1),Y=e("option",{value:"improvement"},"Improvement",-1),Z=[W,X,Y],ee={class:"flex items-center justify-end mt-4"},te={props:["feedbacks"],data(){return{feedbacks:[],feedback:{title:"",description:"",category:""},isModal:!1,IsDeleteModal:!1,typeId:""}},beforeMount(){this.feedbacks=this.$page.props[1].data},methods:{canComment(i,t){t?t=0:t=1,this.$inertia.put(`/feedbacks/${i}`,{can_comment:t}),location.reload()},deleteModal(){this.IsDeleteModal=!1;try{this.$inertia.delete(`/feedbacks/${this.typeId}`),location.reload()}catch(i){console.error(i)}},close(){this.IsDeleteModal=!1},confirmModal(i){this.IsDeleteModal=!0,this.typeId=i},submitFeedback(){this.$inertia.post("/feedbacks",{...this.feedback}),console.log(this.$inertia.page.props.errors),!Object.keys(this.$inertia.page.props.errors).length>0&&(this.isModal=!1)},showModal(){this.isModal=!0},changePage(i){this.currentPage=i}}},_e=Object.assign(te,{__name:"Index",setup(i){return(t,o)=>(n(),g(M,{title:"Feedback"},{header:l(()=>[B,a(h,{class:"mt-5",onClick:o[0]||(o[0]=s=>t.showModal())},{default:l(()=>[r("Create")]),_:1})]),default:l(()=>[e("div",P,[e("div",S,[e("div",j,[e("div",null,[e("div",null,[e("table",N,[e("thead",null,[e("tr",null,[T,x,U,q,this.$page.props.auth.user.is_admin?(n(),d("th",L,"Can Comment")):u("",!0),O])]),e("tbody",null,[(n(!0),d(b,null,v(t.feedbacks,s=>(n(),d("tr",{key:s.id},[e("td",null,m(s.title),1),e("td",null,m(s.category),1),e("td",null,m(s.votes_count),1),e("td",null,m(s.user.name),1),this.$page.props.auth.user.is_admin?(n(),d("td",A,[a(w,{onClick:f=>t.canComment(s.id,!!s.can_comment),value:s.can_comment,checked:!!s.can_comment},null,8,["onClick","value","checked"])])):u("",!0),e("td",null,[this.$page.props.auth.user.is_admin?(n(),d("button",{key:0,onClick:f=>t.confirmModal(s.id)},"Delete",8,E)):u("",!0),e("a",{href:t.route("feedbacks.show",s.id)},H,8,z)])]))),128))])])]),a(C,{onPageChange:t.changePage},null,8,["onPageChange"])]),e("div",null,[a(I,{show:t.isModal,"max-width":"xl"},{default:l(()=>[J,e("form",{class:"form-group px-5 mx-5",onSubmit:o[5]||(o[5]=y((...s)=>t.submitFeedback&&t.submitFeedback(...s),["prevent"]))},[e("div",K,[a(p,{for:"title"},{default:l(()=>[r("Title:")]),_:1}),a(D,{type:"text",id:"title",modelValue:t.feedback.title,"onUpdate:modelValue":o[1]||(o[1]=s=>t.feedback.title=s),"aria-required":"true"},null,8,["modelValue"]),a(c,{message:t.$page.props.errors.title},null,8,["message"])]),e("div",Q,[a(p,{for:"description"},{default:l(()=>[r("Description:")]),_:1}),_(e("textarea",{id:"description","onUpdate:modelValue":o[2]||(o[2]=s=>t.feedback.description=s)},null,512),[[k,t.feedback.description]]),a(c,{message:t.$page.props.errors.description},null,8,["message"])]),e("div",R,[a(p,{for:"category"},{default:l(()=>[r("Category:")]),_:1}),_(e("select",{id:"category","onUpdate:modelValue":o[3]||(o[3]=s=>t.feedback.category=s)},Z,512),[[$,t.feedback.category]]),a(c,{message:t.$page.props.errors.category},null,8,["message"])]),e("div",ee,[a(F,{onClick:o[4]||(o[4]=s=>t.close()),class:"ml-2"},{default:l(()=>[r("Close")]),_:1}),a(h,{type:"submit",class:"ml-2"},{default:l(()=>[r("Create")]),_:1})])],32)]),_:1},8,["show"])]),a(V,{show:t.IsDeleteModal,onDeleteModal:o[6]||(o[6]=s=>t.deleteModal()),onClose:t.close},null,8,["show","onClose"])])])])]),_:1}))}});export{_e as default};
